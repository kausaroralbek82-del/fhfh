(function(g){var window=this;'use strict';var Xb=function(a){a.publish("autonavvisibility")},umt=function(a,l){g.$8(a,"onAutonavCoundownStarted",l)},jy=function(a){return a.isBackground()&&a.Lj()},VpD=function(a,l){l=l.getWatchNextResponse()?.playerOverlays?.playerOverlayRenderer?.autoplay?.playerOverlayAutoplayRenderer?.nextButton?.buttonRenderer;
a.D=l?.navigationEndpoint;l=l?.trackingParams;a.playButton&&l&&a.j.setTrackingParams(a.playButton.element,l)},mq=function(a){const l=tK(a);
var B=Math,u=B.min;var V=a.G?Date.now()-a.G:0;B=u.call(B,V,l);ww(a,Math.ceil((l-B)/1E3));l-B<=500&&a.J()?a.select(!0):a.J()&&a.C.start()},yP=function(a){var l=a.j.d5(!0,a.j.isFullscreen());
g.O(a.container.element,"ytp-autonav-endscreen-small-mode",a.OI(l));g.O(a.container.element,"ytp-autonav-endscreen-is-premium",!!a.suggestion&&!!a.suggestion.m7);g.O(a.j.getRootNode(),"ytp-autonav-endscreen-cancelled-state",!a.j.dS());g.O(a.j.getRootNode(),"countdown-running",a.J());g.O(a.container.element,"ytp-player-content",a.j.dS());g.wQ(a.overlay.element,{width:`${l.width}px`});if(!a.J()){a.j.dS()?ww(a,Math.round(tK(a)/1E3)):ww(a);l=!!a.suggestion&&!!a.suggestion.Kq;const B=a.j.dS()||!l;g.O(a.container.element,
"ytp-autonav-endscreen-upnext-alternative-header-only",!B&&l);g.O(a.container.element,"ytp-autonav-endscreen-upnext-no-alternative-header",B&&!l);a.A.UB(a.j.dS());g.O(a.element,"ytp-enable-w2w-color-transitions",!!a.j.getVideoData()?.watchToWatchTransitionRenderer)}},ww=function(a,l=-1){a=a.V.yI("ytp-autonav-endscreen-upnext-header");
g.fe(a);if(l>=0){l=String(l);const B="\u0412\u0438\u0434\u0435\u043e \u043d\u0430\u0447\u043d\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 $SECONDS".match(RegExp("\\$SECONDS","gi"))[0],u="\u0412\u0438\u0434\u0435\u043e \u043d\u0430\u0447\u043d\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 $SECONDS".indexOf(B);if(u>=0){a.appendChild(g.Ke("\u0412\u0438\u0434\u0435\u043e \u043d\u0430\u0447\u043d\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 $SECONDS".slice(0,u)));const V=
g.v6("span");g.b8(V,"ytp-autonav-endscreen-upnext-header-countdown-number");g.c6(V,l);a.appendChild(V);a.appendChild(g.Ke("\u0412\u0438\u0434\u0435\u043e \u043d\u0430\u0447\u043d\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 $SECONDS".slice(u+B.length)));return}}g.c6(a,"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435")},tK=function(a){return a.j.isFullscreen()?(a=a.j.getVideoData()?.Eu,a===-1||a===void 0?8E3:a):a.j.PH()>=0?a.j.PH():g.fm(a.j.U().experiments,"autoplay_time")||1E4},$Z=
function(a,l){l=b1e(a,l);
var B=Math,u=B.min;var V=(0,g.X)()-a.G;B=u.call(B,V,l);l=l===0?1:Math.min(B/l,1);a.cA.setAttribute("stroke-dashoffset",`${-211*(l+1)}`);l>=1&&a.J()&&a.api.getPresentingPlayerType()!==3?a.select(!0):a.J()&&a.V.start()},b1e=function(a,l){return l?l:a.api.isFullscreen()?(a=a.api.getVideoData()?.Eu,a===-1||a===void 0?8E3:a):a.api.PH()>=0?a.api.PH():g.fm(a.api.U().experiments,"autoplay_time")||1E4},Cu=function(a){const l=a.dS();
l!==a.G&&(a.G=l,Xb(a.player),a.G?(a.Z!==a.J&&a.Z.hide(),a.table.hide()):(a.Z!==a.J&&a.Z.show(),a.table.show()))},qq=function(a){return g.Y9(a.player)&&a.V()&&!a.B},xZ=function(a){const l=a.dS();
l!==a.C&&(a.C=l,Xb(a.player))},ZI=function(a){return g.Y9(a.player)&&a.V()&&!a.A},dw=function(a){const l=a.dS();
l!==a.oJ&&(a.oJ=l,Xb(a.player))},Qwo=function(a){a=a.U();
return a.IK&&!a.Po&&!a.disableOrganicUi},swo=function(a){const l=a.player.getVideoData();
if(!l||a.J===l.Po&&a.Z===l.Zv)return!1;a.J=l.Po;a.Z=l.Zv;return!0},nXD=function(a){a.player.qm("endscreen");
var l=a.player.getVideoData();l=new g.pn(Math.max((l.lengthSeconds-10)*1E3,0),0x8000000000000,{id:"preload",namespace:"endscreen"});const B=new g.pn(0x8000000000000,0x8000000000000,{id:"load",priority:8,namespace:"endscreen"});a.player.KY([l,B])};
g.qf.prototype.PH=g.BR(9,function(){return this.app.PH()});
g.El.prototype.PH=g.BR(8,function(){return this.getVideoData().J4});
g.CE.prototype.PU=g.BR(7,function(a){this.mZ().PU(a)});
g.Fv.prototype.PU=g.BR(6,function(a){this.Kz!==a&&(this.Kz=a,this.VO())});
var ecn=class extends g.Z{constructor(a){const l=a.U(),B=l.V;super({S:"a",L:"ytp-autonav-suggestion-card",N:{href:"{{url}}",target:B?l.C:"","aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}","data-is-upcoming":"{{is_upcoming}}"},X:[{S:"div",dP:["ytp-autonav-endscreen-upnext-thumbnail","ytp-autonav-thumbnail-small"],N:{style:"{{background}}"},X:[{S:"div",N:{"aria-label":"{{timestamp}}"},dP:["ytp-autonav-timestamp"],KV:"{{duration}}"},
{S:"div",dP:["ytp-autonav-live-stamp"],KV:"\u0412 \u044d\u0444\u0438\u0440\u0435"},{S:"div",dP:["ytp-autonav-upcoming-stamp"],KV:"\u0421\u043a\u043e\u0440\u043e \u0432 \u044d\u0444\u0438\u0440\u0435"},{S:"div",L:"ytp-autonav-list-overlay",X:[{S:"div",L:"ytp-autonav-mix-text",KV:"\u041c\u0438\u043a\u0441"},{S:"div",L:"ytp-autonav-mix-icon"}]}]},{S:"div",dP:["ytp-autonav-endscreen-upnext-title","ytp-autonav-title-card"],KV:"{{title}}"},{S:"div",dP:["ytp-autonav-endscreen-upnext-author","ytp-autonav-author-card"],
KV:"{{author}}"},{S:"div",dP:["ytp-autonav-endscreen-upnext-author","ytp-autonav-view-and-date-card"],KV:"{{views_and_publish_time}}"}]});this.j=a;this.suggestion=null;this.J=B;this.listen("click",this.onClick);this.listen("keypress",this.onKeyPress)}select(){this.j.Iu(this.suggestion.videoId,this.suggestion.sessionData,this.suggestion.playlistId,void 0,void 0,this.suggestion.hA||void 0)&&this.j.logClick(this.element)}onClick(a){g.Ji(a,this.j,this.J,this.suggestion.sessionData||void 0)&&this.select()}onKeyPress(a){switch(a.keyCode){case 13:case 32:a.defaultPrevented||
(this.select(),a.preventDefault())}}};var gw=class extends g.Z{constructor(a,l=!1){super({S:"div",L:"ytp-autonav-endscreen-countdown-overlay"});this.aJ=l;this.cancelCommand=this.D=void 0;this.G=0;this.container=new g.Z({S:"div",L:"ytp-autonav-endscreen-countdown-container"});g.W(this,this.container);this.container.jF(this.element);l=a.U();const B=l.V;this.j=a;this.suggestion=null;this.onVideoDataChange("newdata",this.j.getVideoData());this.O(a,"videodatachange",this.onVideoDataChange);this.V=new g.Z({S:"div",L:"ytp-autonav-endscreen-upnext-container",
N:{"aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}","data-is-upcoming":"{{is_upcoming}}"},X:[{S:"div",L:"ytp-autonav-endscreen-upnext-header"},{S:"div",L:"ytp-autonav-endscreen-upnext-alternative-header",KV:"{{autoplayAlternativeHeader}}"},{S:"a",L:"ytp-autonav-endscreen-link-container",N:{href:"{{url}}",target:B?l.C:""},X:[{S:"div",L:"ytp-autonav-endscreen-upnext-thumbnail",N:{style:"{{background}}"},X:[{S:"div",N:{"aria-label":"{{timestamp}}"},
dP:["ytp-autonav-timestamp"],KV:"{{duration}}"},{S:"div",dP:["ytp-autonav-live-stamp"],KV:"\u0412 \u044d\u0444\u0438\u0440\u0435"},{S:"div",dP:["ytp-autonav-upcoming-stamp"],KV:"\u0421\u043a\u043e\u0440\u043e \u0432 \u044d\u0444\u0438\u0440\u0435"}]},{S:"div",L:"ytp-autonav-endscreen-video-info",X:[{S:"div",L:"ytp-autonav-endscreen-premium-badge"},{S:"div",L:"ytp-autonav-endscreen-upnext-title",KV:"{{title}}"},{S:"div",L:"ytp-autonav-endscreen-upnext-author",KV:"{{author}}"},{S:"div",L:"ytp-autonav-view-and-date",
KV:"{{views_and_publish_time}}"},{S:"div",L:"ytp-autonav-author-and-view",KV:"{{author_and_views}}"}]}]}]});g.W(this,this.V);this.V.jF(this.container.element);B||this.O(this.V.yI("ytp-autonav-endscreen-link-container"),"click",this.vA);this.j.createClientVe(this.container.element,this,115127);this.j.createClientVe(this.V.yI("ytp-autonav-endscreen-link-container"),this,115128);this.overlay=new g.Z({S:"div",L:"ytp-autonav-overlay"});g.W(this,this.overlay);this.overlay.jF(this.container.element);this.A=
new g.Z({S:"div",L:"ytp-autonav-endscreen-button-container"});g.W(this,this.A);this.A.jF(this.container.element);this.cancelButton=new g.Z({S:"button",dP:["ytp-autonav-endscreen-upnext-button","ytp-autonav-endscreen-upnext-cancel-button","ytp-autonav-endscreen-upnext-button-rounded"],N:{"aria-label":"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0442\u043e\u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435"},KV:"\u041e\u0442\u043c\u0435\u043d\u0430"});
g.W(this,this.cancelButton);this.cancelButton.jF(this.A.element);this.cancelButton.listen("click",this.cA,this);this.j.createClientVe(this.cancelButton.element,this,115129);this.playButton=new g.Z({S:"a",dP:["ytp-autonav-endscreen-upnext-button","ytp-autonav-endscreen-upnext-play-button","ytp-autonav-endscreen-upnext-button-rounded"],N:{href:"{{url}}",role:"button","aria-label":"\u0412\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u0432\u0438\u0434\u0435\u043e"},
KV:"\u0412\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438"});g.W(this,this.playButton);this.playButton.jF(this.A.element);this.playButton.listen("click",this.vA,this);this.j.createServerVe(this.playButton.element,this.playButton,!0);(l=this.j.getVideoData())&&VpD(this,l);this.C=new g.ar(()=>{mq(this)},500);
g.W(this,this.C);this.oJ();this.O(a,"autonavvisibility",this.oJ);this.j.W("web_autonav_color_transition")&&(this.O(a,"autonavchange",this.RJ),this.O(a,"onAutonavCoundownStarted",this.SF))}Y(a){this.suggestion!==a&&(this.suggestion=a,g.sN(this.V,a),this.playButton.updateValue("url",this.suggestion.U5()),yP(this))}J(){return this.G>0}B(){this.J()||(this.G=Date.now(),mq(this),umt(this.j,tK(this)),g.O(this.j.getRootNode(),"countdown-running",this.J()))}K(){this.Z();mq(this);const a=this.V.yI("ytp-autonav-endscreen-upnext-header");
a&&g.c6(a,"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435")}Z(){this.J()&&(this.C.stop(),this.G=0)}select(a=!1){this.j.nextVideo(!1,a);this.Z()}vA(a){g.Ji(a,this.j)&&(a.currentTarget===this.playButton.element?this.j.logClick(this.playButton.element):a.currentTarget===this.V.yI("ytp-autonav-endscreen-link-container")&&(a=this.V.yI("ytp-autonav-endscreen-link-container"),this.j.logVisibility(a,!0),this.j.logClick(a)),this.D?(g.$8(this.j,"innertubeCommand",this.D),this.Z()):this.select())}cA(){this.j.logClick(this.cancelButton.element);
g.s2(this.j,!0);this.cancelCommand&&g.$8(this.j,"innertubeCommand",this.cancelCommand)}onVideoDataChange(a,l){VpD(this,l);this.cancelCommand=l.getWatchNextResponse()?.playerOverlays?.playerOverlayRenderer?.autoplay?.playerOverlayAutoplayRenderer?.cancelButton?.buttonRenderer?.command}SF(a){if(this.j.getVideoData()?.watchToWatchTransitionRenderer){var l=this.j.getVideoData().watchToWatchTransitionRenderer;const B=l?.fromColorPaletteDark,u=l?.toColorPaletteDark;B&&u&&(l=this.element,l.style.setProperty("--w2w-start-background-color",
g.lw(B.surgeColor)),l.style.setProperty("--w2w-start-primary-text-color",g.lw(B.primaryTitleColor)),l.style.setProperty("--w2w-start-secondary-text-color",g.lw(B.secondaryTitleColor)),l.style.setProperty("--w2w-end-background-color",g.lw(u.surgeColor)),l.style.setProperty("--w2w-end-primary-text-color",g.lw(u.primaryTitleColor)),l.style.setProperty("--w2w-end-secondary-text-color",g.lw(u.secondaryTitleColor)),l.style.setProperty("--w2w-animation-duration",`${a}ms`));g.O(this.element,"ytp-w2w-animate",
!0)}}RJ(a){this.j.W("web_autonav_color_transition")&&a!==2&&g.O(this.element,"ytp-w2w-animate",!1)}oJ(){const a=this.j.dS();this.aJ&&this.iA!==a&&this.UB(a);yP(this);this.j.logVisibility(this.container.element,a);this.j.logVisibility(this.cancelButton.element,a);this.j.logVisibility(this.V.yI("ytp-autonav-endscreen-link-container"),a);this.j.logVisibility(this.playButton.element,a)}OI(a){return a.width<400||a.height<459}};var RG=class extends g.Z{constructor(a,l){super({S:"div",dP:["html5-endscreen","ytp-player-content",l||"base-endscreen"]});this.created=!1;this.player=a}create(){this.created=!0}destroy(){this.created=!1}V(){return!1}dS(){return!1}D(){return!1}};var aB=class extends g.Z{constructor(a){super({S:"div",dP:["ytp-upnext","ytp-player-content"],N:{"aria-label":"{{aria_label}}"},X:[{S:"div",L:"ytp-cued-thumbnail-overlay-image",N:{style:"{{background}}"}},{S:"span",L:"ytp-upnext-top",X:[{S:"span",L:"ytp-upnext-header",KV:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435"},{S:"span",L:"ytp-upnext-title",KV:"{{title}}"},{S:"span",L:"ytp-upnext-author",KV:"{{author}}"}]},{S:"a",L:"ytp-upnext-autoplay-icon",N:{role:"button",href:"{{url}}","aria-label":"\u0412\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u0432\u0438\u0434\u0435\u043e"},
X:[{S:"svg",N:{height:"100%",version:"1.1",viewBox:"0 0 72 72",width:"100%"},X:[{S:"circle",L:"ytp-svg-autoplay-circle",N:{cx:"36",cy:"36",fill:"#fff","fill-opacity":"0.3",r:"31.5"}},{S:"circle",L:"ytp-svg-autoplay-ring",N:{cx:"-36",cy:"36","fill-opacity":"0",r:"33.5",stroke:"#FFFFFF","stroke-dasharray":"211","stroke-dashoffset":"-211","stroke-width":"4",transform:"rotate(-90)"}},{S:"path",L:"ytp-svg-fill",N:{d:"M 24,48 41,36 24,24 V 48 z M 44,24 v 24 h 4 V 24 h -4 z"}}]}]},{S:"span",L:"ytp-upnext-bottom",
X:[{S:"span",L:"ytp-upnext-cancel"},{S:"span",L:"ytp-upnext-paused",KV:"\u0410\u0432\u0442\u043e\u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u043f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e."}]}]});this.api=a;this.cancelButton=null;this.cA=this.yI("ytp-svg-autoplay-ring");this.C=this.notification=this.V=this.suggestion=null;this.D=new g.ar(this.A,5E3,this);this.G=0;var l=this.yI("ytp-upnext-cancel");this.cancelButton=
new g.Z({S:"button",dP:["ytp-upnext-cancel-button","ytp-button"],N:{tabindex:"0","aria-label":"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0442\u043e\u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0435"},KV:"\u041e\u0442\u043c\u0435\u043d\u0430"});g.W(this,this.cancelButton);this.cancelButton.listen("click",this.vA,this);this.cancelButton.jF(l);this.cancelButton&&this.api.createClientVe(this.cancelButton.element,this,115129);g.W(this,this.D);
this.api.createClientVe(this.element,this,18788);l=this.yI("ytp-upnext-autoplay-icon");this.O(l,"click",this.RJ);this.api.createClientVe(l,this,115130);this.oJ();this.O(a,"autonavvisibility",this.oJ);this.O(a,"mdxnowautoplaying",this.SF);this.O(a,"mdxautoplaycanceled",this.aJ);g.O(this.element,"ytp-upnext-mobile",this.api.U().Z)}A(){this.notification&&(this.D.stop(),this.G$(this.C),this.C=null,this.notification.close(),this.notification=null)}Y(a){this.suggestion=a;g.sN(this,a,"hqdefault.jpg")}oJ(){this.UB(this.api.dS());
this.api.logVisibility(this.element,this.api.dS());this.api.logVisibility(this.yI("ytp-upnext-autoplay-icon"),this.api.dS());this.cancelButton&&this.api.logVisibility(this.cancelButton.element,this.api.dS())}bd(){window.focus();this.A()}B(a){this.J()||(g.Ye("a11y-announce",`${"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435"} ${this.suggestion.title}`),this.G=(0,g.X)(),this.V=new g.ar(()=>{$Z(this,a)},25),$Z(this,a),umt(this.api,b1e(this,a)));
g.eV(this.element,"ytp-upnext-autoplay-paused")}hide(){super.hide()}J(){return!!this.V}K(){this.Z();this.G=(0,g.X)();$Z(this);g.sR(this.element,"ytp-upnext-autoplay-paused")}Z(){this.J()&&(this.V.dispose(),this.V=null)}select(a=!1){if(this.api.U().W("autonav_notifications")&&a&&window.Notification&&typeof document.hasFocus==="function"){const l=Notification.permission;l==="default"?Notification.requestPermission():l!=="granted"||document.hasFocus()||(this.A(),this.notification=new Notification("\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435",
{body:this.suggestion.title,icon:this.suggestion.Hg()}),this.C=this.O(this.notification,"click",this.bd),this.D.start())}this.Z();this.api.nextVideo(!1,a)}RJ(a){!g.kB(this.cancelButton.element,a.target)&&g.Ji(a,this.api)&&(this.api.dS()&&this.api.logClick(this.yI("ytp-upnext-autoplay-icon")),this.select())}vA(){this.api.dS()&&this.cancelButton&&this.api.logClick(this.cancelButton.element);g.s2(this.api,!0)}SF(a){this.api.getPresentingPlayerType();this.show();this.B(a)}aJ(){this.api.getPresentingPlayerType();
this.Z();this.hide()}VI(){this.Z();this.A();super.VI()}};var ITt=class extends RG{constructor(a){super(a,"autonav-endscreen");this.overlay=this.videoData=null;this.table=new g.Z({S:"div",L:"ytp-suggestion-panel",X:[{S:"div",dP:["ytp-autonav-endscreen-upnext-header","ytp-autonav-endscreen-more-videos"],KV:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u0438\u0435 \u0432\u0438\u0434\u0435\u043e"}]});this.C=new g.Z({S:"div",L:"ytp-suggestions-container"});this.videos=[];this.K=null;this.G=this.Y=!1;this.Z=new gw(this.player);g.W(this,
this.Z);this.Z.jF(this.element);a.getVideoData().Zv?this.J=this.Z:(this.J=new aB(a),g.ra(this.player,this.J.element,4),g.W(this,this.J));this.overlay=new g.Z({S:"div",L:"ytp-autonav-overlay-cancelled-state"});g.W(this,this.overlay);this.overlay.jF(this.element);this.B=new g.B1(this);g.W(this,this.B);g.W(this,this.table);this.table.jF(this.element);this.table.show();g.W(this,this.C);this.C.jF(this.table.element);this.hide()}create(){super.create();this.B.O(this.player,"appresize",this.A);this.B.O(this.player,
"onVideoAreaChange",this.A);this.B.O(this.player,"videodatachange",this.onVideoDataChange);this.B.O(this.player,"autonavchange",this.oJ);this.B.O(this.player,"onAutonavCancelled",this.vA);this.onVideoDataChange()}show(){super.show();(this.Y||this.K&&this.K!==this.videoData.clientPlaybackNonce)&&g.s2(this.player,!1);g.Y9(this.player)&&this.V()&&!this.K?(Cu(this),this.videoData.autonavState===2?this.player.getVisibilityState()===3||jy(this.player.nj())&&this.player.W("web_player_pip_logging_fix")?this.J.select(!0):
this.J.B():this.videoData.autonavState===3&&this.J.K()):(g.s2(this.player,!0),Cu(this));this.A()}hide(){super.hide();this.J.K();Cu(this)}A(){var a=this.player.d5(!0,this.player.isFullscreen());Cu(this);yP(this.Z);g.O(this.element,"ytp-autonav-cancelled-small-mode",this.OI(a));g.O(this.element,"ytp-autonav-cancelled-tiny-mode",this.xW(a));g.O(this.element,"ytp-autonav-cancelled-mini-mode",a.width<=400||a.height<=360);this.overlay&&g.wQ(this.overlay.element,{width:`${a.width}px`});if(!this.G)for(a=
0;a<this.videos.length;a++)g.O(this.videos[a].element,"ytp-suggestion-card-with-margin",a%2===1)}onVideoDataChange(){var a=this.player.getVideoData();if(this.videoData!==a&&a){this.videoData=a;a=this.videoData.suggestions;var l=this.videoData.Zh();l&&(this.J.Y(l),this.J!==this.Z&&this.Z.Y(l));if(a&&a.length)for(let u=0;u<MpD.length;++u){var B=MpD[u];a&&a[B]&&(this.videos[u]=new ecn(this.player),l=this.videos[u],B=a[B],l.suggestion!==B&&(l.suggestion=B,g.sN(l,B)),g.W(this,this.videos[u]),this.videos[u].jF(this.C.element))}this.A()}}oJ(a){a===
1?(this.Y=!1,this.K=this.videoData.clientPlaybackNonce,this.J.Z(),this.iA&&this.A()):(this.Y=!0,this.dS()&&(a===2?this.J.B():a===3&&this.J.K()))}vA(a){a?this.oJ(1):(this.K=null,this.Y=!1)}V(){return this.videoData.autonavState!==1}OI(a){return(a.width<910||a.height<459)&&!this.xW(a)&&!(a.width<=400||a.height<=360)}xW(a){return a.width<800&&!(a.width<=400||a.height<=360)}dS(){return this.iA&&g.Y9(this.player)&&this.V()&&!this.K}},MpD=[1,3,2,4];var Fmv=class extends RG{constructor(a){super(a,"videowall-endscreen");this.j=a;this.stills=[];this.B=this.videoData=null;this.A=this.C=!1;this.oJ=null;g.sR(this.element,"modern-videowall-endscreen");this.Z=new g.B1(this);g.W(this,this.Z);this.G=new g.ar(()=>{g.sR(this.element,"ytp-show-tiles")},0);
g.W(this,this.G);this.table=new g.Px({S:"div",L:"ytp-modern-endscreen-content"});g.W(this,this.table);this.table.jF(this.element);a.getVideoData().Zv?this.J=new gw(a,!0):this.J=new aB(a);g.W(this,this.J);g.ra(this.player,this.J.element,4);a.createClientVe(this.element,this,158789);this.hide()}create(){super.create();var a=this.player.getVideoData();a&&(this.videoData=a);this.K();this.Z.O(this.player,"appresize",this.K);this.Z.O(this.player,"onVideoAreaChange",this.K);this.Z.O(this.player,"videodatachange",
this.onVideoDataChange);this.Z.O(this.player,"autonavchange",this.Y);this.Z.O(this.player,"onAutonavCancelled",this.vA);a=this.videoData.autonavState;a!==this.oJ&&this.Y(a);this.Z.O(this.element,"transitionend",this.RJ)}destroy(){this.Z.Z();g.nN(this.stills);this.stills=[];super.destroy();g.eV(this.element,"ytp-show-tiles");this.G.stop();this.oJ=this.videoData.autonavState}V(){return this.videoData.autonavState!==1}show(){const a=this.iA;super.show();g.eV(this.element,"ytp-show-tiles");this.player.U().Z?
g.l8(this.G):this.G.start();(this.A||this.B&&this.B!==this.videoData.clientPlaybackNonce)&&g.s2(this.player,!1);qq(this)?(xZ(this),this.videoData.autonavState===2?this.player.getVisibilityState()===3||jy(this.player.nj())&&this.player.W("web_player_pip_logging_fix")?this.J.select(!0):this.J.B():this.videoData.autonavState===3&&this.J.K()):(g.s2(this.player,!0),xZ(this));a!==this.iA&&this.player.logVisibility(this.element,!0)}hide(){const a=this.iA;super.hide();this.J.K();xZ(this);a!==this.iA&&this.player.logVisibility(this.element,
!1)}RJ(a){a.target===this.element&&this.K()}K(){const a=this.videoData?.suggestions?.length?this.videoData?.suggestions:[this.videoData?.Zh()];if(a.length){var l=this.j.d5(!0,this.j.isFullscreen()),B=Math.floor((l.width-64+16)/(g.Sv(l.width*.27,250,450)+16));l=Math.min(3,Math.floor((l.height-64)/((l.width-64-(B-1)*16)/B*.5625+70)));g.Mk(this.element,["ytp-modern-endscreen-limit-rows-1","ytp-modern-endscreen-limit-rows-2","ytp-modern-endscreen-limit-rows-3"]);g.sR(this.element,`ytp-modern-endscreen-limit-rows-${l}`);
g.O(this.element,"ytp-modern-endscreen-single-item",B===1);g.O(this.element,"ytp-modern-endscreen-row-0",l===0);B=this.table.element;B.ariaLive="polite";this.J.Y(this.videoData.Zh());this.J instanceof gw&&yP(this.J);g.O(this.element,"ytp-endscreen-takeover",qq(this));xZ(this);l=0;B.ariaBusy="true";var u=a.length;for(let V=0;V<u;V++){const b=V%u;let Q=this.stills[V];Q||(Q=new g.iAe(this.player),this.stills[V]=Q,B.appendChild(Q.element));g.OWx(Q,a[b]);l++}this.stills.length=l}}onVideoDataChange(){const a=
this.player.getVideoData({playerType:1});this.videoData!==a&&(a?.Zh()?(this.videoData=a,this.K()):this.player.nV("missg",{vid:a?.videoId||"",cpn:a?.clientPlaybackNonce||""}))}D(){return this.J.J()}Y(a){a===1?(this.A=!1,this.B=this.videoData.clientPlaybackNonce,this.J.Z(),this.iA&&this.K()):(this.A=!0,this.iA&&qq(this)&&(a===2?this.J.B():a===3&&this.J.K()))}vA(a){if(a){for(a=0;a<this.stills.length;a++)this.j.logVisibility(this.stills[a].element,!0);this.Y(1)}else this.B=null,this.A=!1;this.K()}dS(){return this.iA&&
qq(this)}};var rEv=class extends RG{constructor(a){super(a,"subscribecard-endscreen");this.J=new g.Z({S:"div",L:"ytp-subscribe-card",X:[{S:"img",L:"ytp-author-image",N:{src:"{{profilePicture}}"}},{S:"div",L:"ytp-subscribe-card-right",X:[{S:"div",L:"ytp-author-name",KV:"{{author}}"},{S:"div",L:"html5-subscribe-button-container"}]}]});g.W(this,this.J);this.J.jF(this.element);const l=a.getVideoData();this.subscribeButton=new g.ah("\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f",null,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0443",
null,!0,!1,l.Ti,l.subscribed,"trailer-endscreen",null,a,!1);g.W(this,this.subscribeButton);this.subscribeButton.jF(this.J.yI("html5-subscribe-button-container"));this.O(a,"videodatachange",this.Yn);this.Yn();this.hide()}Yn(){const a=this.player.getVideoData();this.J.update({profilePicture:a.profilePicture,author:a.author});this.subscribeButton.channelId=a.Ti;var l=this.subscribeButton;a.subscribed?l.J():l.Z()}};var Yvt=class extends g.Z{constructor(a){const l=a.U(),B=g.M2||g.I$?{style:"will-change: opacity"}:void 0,u=l.V,V=["ytp-videowall-still"];l.Z&&V.push("ytp-videowall-show-text");super({S:"a",dP:V,N:{href:"{{url}}",target:u?l.C:"","aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}"},X:[{S:"div",L:"ytp-videowall-still-image",N:{style:"{{background}}"}},{S:"span",L:"ytp-videowall-still-info",N:{"aria-hidden":"true"},X:[{S:"span",L:"ytp-videowall-still-info-bg",
X:[{S:"span",L:"ytp-videowall-still-info-content",N:B,X:[{S:"span",L:"ytp-videowall-still-info-title",KV:"{{title}}"},{S:"span",L:"ytp-videowall-still-info-author",KV:"{{author_and_views}}"},{S:"span",L:"ytp-videowall-still-info-live",KV:"\u0412 \u044d\u0444\u0438\u0440\u0435"},{S:"span",L:"ytp-videowall-still-info-duration",KV:"{{duration}}"}]}]}]},{S:"span",dP:["ytp-videowall-still-listlabel-regular","ytp-videowall-still-listlabel"],N:{"aria-hidden":"true"},X:[{S:"span",L:"ytp-videowall-still-listlabel-icon"},
"\u041f\u043b\u0435\u0439\u043b\u0438\u0441\u0442",{S:"span",L:"ytp-videowall-still-listlabel-length",X:[" (",{S:"span",KV:"{{playlist_length}}"},")"]}]},{S:"span",dP:["ytp-videowall-still-listlabel-mix","ytp-videowall-still-listlabel"],N:{"aria-hidden":"true"},X:[{S:"span",L:"ytp-videowall-still-listlabel-mix-icon"},"\u041c\u0438\u043a\u0441",{S:"span",L:"ytp-videowall-still-listlabel-length",KV:" (50+)"}]}]});this.suggestion=null;this.Z=u;this.api=a;this.J=new g.B1(this);g.W(this,this.J);this.listen("click",
this.onClick);this.listen("keypress",this.onKeyPress);this.J.O(a,"videodatachange",this.onVideoDataChange);a.createServerVe(this.element,this);this.onVideoDataChange()}select(){this.api.Iu(this.suggestion.videoId,this.suggestion.sessionData,this.suggestion.playlistId,void 0,void 0,this.suggestion.hA||void 0)&&this.api.logClick(this.element)}onClick(a){if(g.Uz(this.api.U())&&this.api.W("web_player_log_click_before_generating_ve_conversion_params")){this.api.logClick(this.element);let l=this.suggestion.U5();
const B={};g.I8(this.api,B);l=g.WI(l,B);g.iR(l,this.api,a)}else g.Ji(a,this.api,this.Z,this.suggestion.sessionData||void 0)&&this.select()}onKeyPress(a){switch(a.keyCode){case 13:case 32:a.defaultPrevented||(this.select(),a.preventDefault())}}onVideoDataChange(){const a=this.api.getVideoData(),l=this.api.U();this.Z=a.Ke?!1:l.V}};var vXn=class extends RG{constructor(a){super(a,"videowall-endscreen");this.j=a;this.B=0;this.stills=[];this.A=this.videoData=null;this.G=this.oJ=!1;this.vA=null;this.K=new g.B1(this);g.W(this,this.K);this.Y=new g.ar(()=>{g.sR(this.element,"ytp-show-tiles")},0);
g.W(this,this.Y);var l=new g.Z({S:"button",dP:["ytp-button","ytp-endscreen-previous"],N:{"aria-label":"\u041d\u0430\u0437\u0430\u0434"},X:[g.P2()]});g.W(this,l);l.jF(this.element);l.listen("click",this.SF,this);this.table=new g.Px({S:"div",L:"ytp-endscreen-content"});g.W(this,this.table);this.table.jF(this.element);l=new g.Z({S:"button",dP:["ytp-button","ytp-endscreen-next"],N:{"aria-label":"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435"},X:[g.ks()]});g.W(this,l);l.jF(this.element);l.listen("click",
this.cA,this);a.getVideoData().Zv?this.J=new gw(a,!0):this.J=new aB(a);g.W(this,this.J);g.ra(this.player,this.J.element,4);a.createClientVe(this.element,this,158789);this.hide()}create(){super.create();var a=this.player.getVideoData();a&&(this.videoData=a);this.Z();this.K.O(this.player,"appresize",this.Z);this.K.O(this.player,"onVideoAreaChange",this.Z);this.K.O(this.player,"videodatachange",this.onVideoDataChange);this.K.O(this.player,"autonavchange",this.C);this.K.O(this.player,"onAutonavCancelled",
this.RJ);a=this.videoData.autonavState;a!==this.vA&&this.C(a);this.K.O(this.element,"transitionend",this.aJ)}destroy(){this.K.Z();g.nN(this.stills);this.stills=[];super.destroy();g.eV(this.element,"ytp-show-tiles");this.Y.stop();this.vA=this.videoData.autonavState}V(){return this.videoData.autonavState!==1}show(){const a=this.iA;super.show();g.eV(this.element,"ytp-show-tiles");this.player.U().Z?g.l8(this.Y):this.Y.start();(this.G||this.A&&this.A!==this.videoData.clientPlaybackNonce)&&g.s2(this.player,
!1);ZI(this)?(dw(this),this.videoData.autonavState===2?this.player.getVisibilityState()===3||jy(this.player.nj())&&this.player.W("web_player_pip_logging_fix")?this.J.select(!0):this.J.B():this.videoData.autonavState===3&&this.J.K()):(g.s2(this.player,!0),dw(this));a!==this.iA&&this.player.logVisibility(this.element,!0)}hide(){const a=this.iA;super.hide();this.J.K();dw(this);a!==this.iA&&this.player.logVisibility(this.element,!1)}aJ(a){a.target===this.element&&this.Z()}Z(){var a=this.videoData?.suggestions?.length?
this.videoData?.suggestions:[this.videoData?.Zh()];if(a.length){g.sR(this.element,"ytp-endscreen-paginate");var l=this.j.d5(!0,this.j.isFullscreen()),B=g.a8(this.j);B&&(B=B.Sy()?48:32,l.width-=B*2);var u=l.width/l.height,V=96/54,b=B=2,Q=Math.max(l.width/96,2),n=Math.max(l.height/54,2),e=a.length;var M=e*4;for(M-=4;M>0&&(B<Q||b<n);){var I=B/2,F=b/2,r=B<=Q-2&&M>=F*4,Y=b<=n-2&&M>=I*4;if((I+1)/F*V/u>u/(I/(F+1)*V)&&Y)M-=I*4,b+=2;else if(r)M-=F*4,B+=2;else if(Y)M-=I*4,b+=2;else break}V=!1;M>=12&&e*4-M<=
6&&(b>=4||B>=4)&&(V=!0);M=B*96;Q=b*54;u=M/Q<u?l.height/Q:l.width/M;u=Math.min(u,2);M=Math.floor(Math.min(l.width,M*u));Q=Math.floor(Math.min(l.height,Q*u));l=this.table.element;l.ariaLive="polite";g.uc(l,M,Q);g.wQ(l,{marginLeft:`${M/-2}px`,marginTop:`${Q/-2}px`});this.J.Y(this.videoData.Zh());this.J instanceof gw&&yP(this.J);g.O(this.element,"ytp-endscreen-takeover",ZI(this));dw(this);M+=4;Q+=4;u=0;l.ariaBusy="true";for(n=0;n<B;n++)for(I=0;I<b;I++)if(r=u,Y=0,V&&n>=B-2&&I>=b-2?Y=1:I%2===0&&n%2===0&&
(I<2&&n<2?I===0&&n===0&&(Y=2):Y=2),r=g.Gl(r+this.B,e),Y!==0){F=this.stills[u];F||(F=new Yvt(this.player),this.stills[u]=F,l.appendChild(F.element));var N=Math.floor(Q*I/b);const p=Math.floor(M*n/B),J=Math.floor(Q*(I+Y)/b)-N-4,z=Math.floor(M*(n+Y)/B)-p-4;g.ZG(F.element,p,N);g.uc(F.element,z,J);g.wQ(F.element,"transitionDelay",(I+n)/20+"s");g.O(F.element,"ytp-videowall-still-mini",Y===1);g.O(F.element,"ytp-videowall-still-large",Y>2);Y=Math.max(z,J);g.O(F.element,"ytp-videowall-still-round-large",Y>=
256);g.O(F.element,"ytp-videowall-still-round-medium",Y>96&&Y<256);g.O(F.element,"ytp-videowall-still-round-small",Y<=96);r=a[r];F.suggestion!==r&&(F.suggestion=r,Y=F.api.U(),N=g.QT(F.element,"ytp-videowall-still-large")?"hqdefault.jpg":"mqdefault.jpg",g.sN(F,r,N),g.Uz(Y)&&!F.api.W("web_player_log_click_before_generating_ve_conversion_params")&&(Y=r.U5(),N={},g.x8(F.api,"addEmbedsConversionTrackingParams",[N]),Y=g.WI(Y,N),F.updateValue("url",Y)),(r=(r=r.sessionData)&&r.itct)&&F.api.setTrackingParams(F.element,
r));u++}l.ariaBusy="false";g.O(this.element,"ytp-endscreen-paginate",u<e);for(a=this.stills.length-1;a>=u;a--)B=this.stills[a],g.P6(B.element),g.sj(B);this.stills.length=u}}onVideoDataChange(){const a=this.player.getVideoData({playerType:1});this.videoData!==a&&(a?.Zh()?(this.B=0,this.videoData=a,this.Z()):this.player.nV("missg",{vid:a?.videoId||"",cpn:a?.clientPlaybackNonce||""}))}cA(){this.B+=this.stills.length;this.Z()}SF(){this.B-=this.stills.length;this.Z()}D(){return this.J.J()}C(a){a===1?(this.G=
!1,this.A=this.videoData.clientPlaybackNonce,this.J.Z(),this.iA&&this.Z()):(this.G=!0,this.iA&&ZI(this)&&(a===2?this.J.B():a===3&&this.J.K()))}RJ(a){if(a){for(a=0;a<this.stills.length;a++)this.j.logVisibility(this.stills[a].element,!0);this.C(1)}else this.A=null,this.G=!1;this.Z()}dS(){return this.iA&&ZI(this)}};var Kmo=class extends g.Z{constructor(a){super({S:"button",dP:["ytp-watch-on-youtube-button","ytp-button"],KV:"{{content}}"});this.j=a;this.buttonType=this.buttonType=1;this.J();this.buttonType===2&&g.sR(this.element,"ytp-continue-watching-button");this.listen("click",this.onClick);this.listen("videodatachange",this.J);this.UB(!0)}J(){let a,l;switch(this.buttonType){case 1:a="\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u043d\u043e\u0432\u0430 \u043d\u0430 YouTube";l=156915;
break;case 2:a="\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u043d\u0430 YouTube";l=156942;break;default:a="\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u043d\u0430 YouTube",l=156942}this.update({content:a});this.j.hasVe(this.element)&&this.j.destroyVe(this.element);this.j.createClientVe(this.element,this,l)}onClick(a){this.j.W("web_player_log_click_before_generating_ve_conversion_params")&&
this.j.logClick(this.element);g.iR(this.getVideoUrl(),this.j,a);this.j.W("web_player_log_click_before_generating_ve_conversion_params")||this.j.logClick(this.element)}getVideoUrl(){var a=!0;switch(this.buttonType){case 1:a=!0;break;case 2:a=!1}a=this.j.getVideoUrl(a,!1,!1,!0);const l=this.j.U();if(g.Uz(l)){const B={};g.Uz(l)&&g.x8(this.j,"addEmbedsConversionTrackingParams",[B]);a=g.WI(a,B)}return a}logVisibility(){this.j.logVisibility(this.element,this.iA&&this.Zh)}show(){super.show();this.logVisibility()}hide(){super.hide();
this.logVisibility()}Rp(a){super.Rp(a);this.logVisibility()}};var Nho=class extends RG{constructor(a){super(a,"watch-again-on-youtube-endscreen");this.watchButton=new Kmo(a);g.W(this,this.watchButton);this.watchButton.jF(this.element);g.eD4(a)&&(this.J=new g.MEp(a),g.W(this,this.J),this.Z=new g.Z({S:"div",dP:["ytp-watch-again-on-youtube-endscreen-more-videos-container"],N:{tabIndex:"-1"},X:[this.J]}),g.W(this,this.Z),this.J.jF(this.Z.element),this.Z.jF(this.element));a.createClientVe(this.element,this,156914);this.hide()}hasSuggestions(){return this.J?.hasSuggestions()}show(){if(this.player.getPlayerState()!==
3){super.show();const l=this.Z;if(l){var a=this.J.hasSuggestions();g.O(this.element,"ytp-shorts-branded-ui",a);a?l.show():l.hide()}g.a8(this.player)?.PU(!0);this.player.logVisibility(this.element,!0);this.watchButton.Rp(!0)}}hide(){super.hide();g.a8(this.player)?.PU(!1);this.player.logVisibility(this.element,!1);this.watchButton.Rp(!1)}};g.P_("endscreen",class extends g.fP{constructor(a){super(a);this.endScreen=null;this.J=this.Z=this.K=!1;this.listeners=new g.B1(this);g.W(this,this.listeners);const l=a.U();a.isEmbedsShortsMode()?this.endScreen=new Nho(a):Qwo(a)?(this.K=!0,swo(this),this.J?this.endScreen=new ITt(a):l.W("delhi_modern_endscreen")?this.endScreen=new Fmv(a):this.endScreen=new vXn(a)):l.Po?this.endScreen=new rEv(a):this.endScreen=new RG(a);g.W(this,this.endScreen);g.ra(a,this.endScreen.element,4);nXD(this);this.listeners.O(a,
"videodatachange",this.onVideoDataChange,this);this.listeners.O(a,g.NE("endscreen"),B=>{this.onCueRangeEnter(B)});
this.listeners.O(a,g.fL("endscreen"),B=>{this.onCueRangeExit(B)})}hj(){var a=this.player.getVideoData();
const l=a.mutedAutoplay&&(a.limitedPlaybackDurationInSeconds>0||a.endSeconds>0||a.mutedAutoplayDurationMode!==2);if(this.player.isEmbedsShortsMode()&&!l)return!0;var B=!(!a?.Zh()&&!a?.suggestions?.length);B=!Qwo(this.player)||B;a=a.m1;const u=this.player.Qr();return B&&!a&&!u&&!l}dS(){return this.endScreen.dS()}ZR(){return this.dS()?this.endScreen.D():!1}VI(){this.player.qm("endscreen");super.VI()}load(){{const B=this.player.getVideoData(),u=B.transitionEndpointAtEndOfStream;if(u&&u.videoId){var a=
this.player.kx().zQ.get("heartbeat");var l=B.Zh();!l||u.videoId!==l.videoId||B.a5?(this.player.Iu(u.videoId,void 0,void 0,!0,!0,u),a&&a.nm("HEARTBEAT_ACTION_TRIGGER_AT_STREAM_END","HEARTBEAT_ACTION_TRANSITION_REASON_HAS_NEW_STREAM_TRANSITION_ENDPOINT"),a=!0):a=!1}else a=!1}a||(super.load(),this.endScreen.show())}unload(){super.unload();this.endScreen.hide();this.endScreen.destroy()}onCueRangeEnter(a){this.hj()&&(this.endScreen.created||this.endScreen.create(),a.getId()==="load"&&this.load())}onCueRangeExit(a){a.getId()===
"load"&&this.loaded&&this.unload()}onVideoDataChange(){nXD(this);this.K&&swo(this)&&(this.endScreen&&(this.endScreen.hide(),this.endScreen.created&&this.endScreen.destroy(),this.endScreen.dispose()),this.J?this.endScreen=new ITt(this.player):this.endScreen=new vXn(this.player),g.W(this,this.endScreen),g.ra(this.player,this.endScreen.element,4))}});})(_yt_player);
